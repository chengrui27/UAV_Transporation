在之前的工作中，我在plan_env功能包中构建了ESDF地图，并将距离和梯度信息发布到了共享内存中；
在px4功能包的控制节点中读取地图信息，并传入acados的求解器用于避障；
px4功能包中的节点用nmpc控制无人机飞行，而px4_payload功能包中的节点控制无人机吊运负载飞行；
现在我想要将px4功能包中新添加的避障功能也添加到px4_payload功能包中；
帮我按照下面步骤逐步修改px4_payload功能包，每修改一步就编译检查是否能够正确编译运行；
px4功能包已经能够成功编译运行，修改的过程参考px4功能包中的实现方法，不要自己瞎改报错；

1、复制esdf_map_reader文件到px4_payload功能包中，修改代码，确保该节点能够正确编译运行，并正确读取共享内存；

2、修改px4_payload文件夹中的px4_payload_nmpc.py文件，为负载添加避障软约束；

3、修改对应的c++代码，将避障所需要的参数传入求解器，实现避障功能；